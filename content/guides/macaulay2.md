+++
date = "2019-04-15T18:56:55+01:00"
title = "Using HomotopyContinuation.jl from Macaulay2"
bref = "How do I solve my ideal from Macaulay2 with HomotopyContinuation.jl?"
description = "How do I solve my ideal from Macaulay2 with HomotopyContinuation.jl?"
draft = false
weight = 1
toc = true
group = "feature-guide"
+++

[Macaulay2](http://www2.macaulay2.com/Macaulay2/) is a great software for symbolic computations
and it has many features which are not yet available in Julia.
In this guide we show a possible workflow where the *symbolic* computations are happening
in Macaulay2 and the *numerical* work in Julia.

<h3 class="section-head" id="setting*up"><a href="#setting*up">Setting things up</a></h3>

Our goal is to have a function `writeSystem` available which accepts
as input an ideal `I` (or a list of polynomials) and a filename `f` and generates a file `f`
containing the necessary Julia code to compute the solutions of `I` using HomotopyContinuation.jl.

For example, the Macaulay2 code

```julia
R = QQ[x, y]
I = ideal(x^2 + y^2 + 1, x - y - 4)
writeSystem(I, "example1.jl")
```

should generate a file `example1.jl` containing

```julia
# This file was auto generated from Macaulay2.
# For more information about HomotopyContinuation.jl visit:
#    https://www.JuliaHomotopyContinuation.org
using HomotopyContinuation

@polyvar x y
f = [x^2+y^2+1, x-y-4];

result = solve(f)
```

The function `writeSystem` can be achieved by the following code
<script src="https://gist.github.com/saschatimme/02faf68103d639eb31f5706760b974d4.js"></script>

You can copy and paste this code in your current Macaulay2 session and then you have the `writeSystem` function available.
But since it is annoying to define this for every new session again we **recommend** to add the code to your [`init.m2`](https://faculty.math.illinois.edu/Macaulay2/doc/Macaulay2-1.12/share/doc/Macaulay2/Macaulay2Doc/html/_initialization_spfile.html) file.


**Acknowledgement**: A first version of the code was written by [Tim Duff](http://people.math.gatech.edu/~tduff3/) during a Macaulay2 workshop at the Max-Planck-Institute for Mathematics in the Sciences in Leipzig.

<h3 class="section-head" id="example"><a href="#example">An example from Schubert calculus</a></h3>

Let $M = (m\_{ij})$ be a $3 \times 5$ matrix where the entries $m\_{ij} \in \mathbb{Q}[x,y,z]$ are generic polynomials of degree 2.
[Schubert calculus](https://en.wikipedia.org/wiki/Schubert_calculus) tells us that the ideal $I$ generated by the maximal of minors of $M$ is zero dimensional with degree 80.

The code to generate $I$ is
```
R = QQ[x,y,z];
M = matrix apply(3,u->apply(5,t->random(2,R)+random(1,R)+random(0,R)))
I = minors(3,M);
```

Now we can use our new `writeSystem` method to generate the necessary Julia code

```
writeSystem(I, "minors35.jl")
```

Now let's start a Julia session and load the newly generated file

```julia-repl
julia> include("minors35.jl")
```
```
Result with 80 solutions
==================================
• 80 non-singular solutions (4 real)
• 0 singular solutions (0 real)
• 216 paths tracked
• random seed: 488250
```
and we see that we found the correct number of solutions.
