<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta name="generator" content="Hugo 0.50" />
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> The 6R-serial link robot </title>

  
  <meta name="description" content="Using HomotopyContinuation.jl for a problem in kinematics"> 
  
  
  
  
  

  

  <meta name="author" content="Sascha">


  <meta property="og:title" content="The 6R-serial link robot" />
<meta property="og:description" content="Using HomotopyContinuation.jl for a problem in kinematics" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/examples/6rlinkrobot/" /><meta property="article:published_time" content="2019-03-26T21:56:55&#43;01:00"/>
<meta property="article:modified_time" content="2019-03-26T21:56:55&#43;01:00"/>

  




  
  
  
  
  

  <link rel="canonical" href="/examples/6rlinkrobot/">  

  

  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">

  <link href="/css/font.css" rel="stylesheet" type="text/css">
  <link href="/css/kube.min.css" rel="stylesheet" type="text/css">
  <link href="/css/kube.legenda.css" rel="stylesheet" type="text/css">
  <link href="/css/highlight.css" rel="stylesheet" type="text/css">
  <link href="/css/master.css" rel="stylesheet" type="text/css">
  <link href="/css/kube.demo.css" rel="stylesheet" type="text/css">


  <script src="/js/jquery-2.1.4.min.js" type="text/javascript"> </script>

  <script type="text/javascript" src="/js/tocbot.min.js"></script>


    
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-130815722-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-130815722-1');
  </script>

  

    
    <link rel="stylesheet" href="/css/atom-one-dark.css">
    <script src="/js/highlight.pack.js"></script>
    <script src="/js/init-highlight.js"></script>
 
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>

    
    <link href="/css/custom.css" rel="stylesheet" type="text/css">
    
</head>


<body class="page-kube">
  <header> <div class="show-sm">
    <div id="nav-toggle-box">
      <div id="nav-toggle-brand">
        <a href="/">HomotopyContinuation.jl</a>
      </div><a data-component="toggleme" data-target="#top" href="#" id="nav-toggle"><i class="kube-menu"></i></a>
    </div>
  </div>
  <div class="hide-sm" id="top">
    <div id="top-brand">
      <a href="/" title="home">HomotopyContinuation.jl</a>
    </div>
    <nav id="top-nav-main">
      <ul> 
       
       
    <li><a href="/guides/" >Guides</a></li>
    
    <li><a href="/examples/" >Examples</a></li>
    
    <li><a href="https://juliahomotopycontinuation.github.io/HomotopyContinuation.jl/stable/" >API Docs</a></li>
    
    <li><a href="/about/" >About</a></li>
    
    <li><a href="/faq/" >FAQ</a></li>
    
    <li><a href="/do-it-yourself" >Do It Yourself</a></li>
    
      </ul>
    </nav>
    <nav id="top-nav-extra"> 
      <ul>
          
      </ul>
    </nav>
  </div>
 </header>
  <main>
<div class="push-center" itemscope itemtype="http://schema.org/API DocsPosting">
    
<meta itemprop="name" content="The 6R-serial link robot">
<meta itemprop="description" content="Using HomotopyContinuation.jl for a problem in kinematics">


<meta itemprop="datePublished" content="2019-03-26T21:56:55&#43;01:00" />
<meta itemprop="dateModified" content="2019-03-26T21:56:55&#43;01:00" />
<meta itemprop="wordCount" content="781">



<meta itemprop="keywords" content="example," />

<div id="hero">
    <h1 itemprop="headline">  The 6R-serial link robot</h1>
    
<blockquote itemprop="description">Using HomotopyContinuation.jl for a problem in kinematics</blockquote>

<time class="post-time"><span class="icon">
  <i class="fa fa-clock-o" aria-hidden="true"></i>
</span>
<span>4 minute read</span>
<span class="icon">
 <i class="fa fa-pencil" aria-hidden="true"></i>
</span>

  Published: <time datetime="2019-03-26T21:56:55&#43;01:00">26 Mar, 2019</time>

</time>
</div>
<div id="post-box">
<div id="post" itemprop="articleBody">
    
    

<p>The following example is from Section 7.3 in <a href="https://www.worldscientific.com/worldscibooks/10.1142/5763">A. Sommese, C. Wampler: The Numerical Solution of Systems of Polynomial Arising in Engineering and Science</a></p>

<p>Consider a robot that consists of 7 links connected by 6 joints. The first link is fixed on the ground and the last link has a &ldquo;hand&rdquo;. The problem of determining the position of the hand when knowing the arrangement of the joints is called  <em>forward problem</em>. The problem of determining any arrangement of joints that realized a fixed position of the hand is called <em>backward problem</em>.</p>

<p><figure>
<img src="/images/kuka-6r.jpg" class="center"/>
<figcaption>A Kuka KR 120 R1800 six revolute robot.</figcaption>
</figure>
Let us denote by $z_1,\ldots,z_6$ the unit vectors that point in the direction of the joint axes.  They satisfy the following polynomial equations</p>

<ul>
<li>$z_i \cdot z_i = 1,\; i=1,\ldots,6.$</li>
<li>$z_1 \cdot z_2 = \cos \alpha_1,\ldots, z_5 \cdot z_6 = \cos \alpha_5$.</li>
<li>$a_1\, (z_1 \times z_2) + \cdots + a_5\, (z_5 \times z_6) + a_6 \,z_2 + \cdots + a_9  \,z_5= p.$</li>
</ul>

<p>for $\alpha=(\alpha_1\ldots, \alpha_5)$ and $a=(a_1,\ldots,a_9)$ and $p=(p_1,p_2,p_3)$.
The $\alpha_i$ are the &ldquo;twist angle&rdquo; between joints, the $a_i$ are the &ldquo;link length&rdquo; between joint axes
and the $p$ encodes the position of the hand. Here $\times$ is the cross product in $\mathbb{R}^3$.</p>

<p>see the above reference for a detailed explanation on how these numbers are to be interpreted). Here $\times$ is the cross product in $\mathbb{R}^3$.</p>

<p>In this notation the forward problem consists of computing $(\alpha,a)$ given the $z_i$ and $p$ and the backward problem consists of computing  $z_2,\ldots,z_5$ that realize some fixed $(\alpha,a,p,z_1,z_6)$ (knowing $z_1,z_6$ means that the position where the robot is attached to the ground  and the position where its hand should be are fixed).</p>

<p>Assume that $z_1$ and $z_6$ are random unit vectors, $p=(1,1,0)$ and some random $a$ and $\alpha$. We compute all backward solutions. We start with setting up the system.</p>

<pre><code class="language-julia">using HomotopyContinuation, LinearAlgebra, DynamicPolynomials
# initialize the variables
@polyvar z[1:6,1:3] p[1:3]
α = randn(5)
a = randn(9)
# define the system of polynomials
f = [z[i,:] ⋅ z[i,:] for i = 2:5]
g = [z[i,:] ⋅ z[i+1,:] for i = 1:5]
h = sum(a[i] .* (z[i,:] × z[i+1,:]) for i=1:3) +
    sum(a[i+4] .* z[i,:] for i = 2:5)
F′ = [f .- 1; g .- cos.(α); h .- p]
# assign values to z₁ and z₆
z₁ = normalize!(randn(3))
z₆ = normalize!(randn(3))
F = [subs(f, z[1,:]=&gt;z₁, z[6,:]=&gt;z₆, p=&gt;[1, 1, 0]) for f in F′]
</code></pre>

<p>Now we can just pass <code>F</code> to <code>solve</code> in order to compute all solutions.</p>

<pre><code>julia&gt; solve(F)
Result with 16 solutions
==================================
• 16 non-singular solutions (0 real)
• 0 singular solutions (0 real)
• 1024 paths tracked
• random seed: 462257
</code></pre>

<p>We find 16 solutions, which is the correct number of solutions for these type of systems.</p>

<p>But if we study the problem a little bit closer, we can see that the equations are bi-homogenous with respect to the variable groups $\{z_2, z_4\}$ and $\{z_3, z_5\}$.
The multi-homogenous Bezout number with respect ot this variable group is</p>

<pre><code class="language-julia">julia&gt; variable_groups=[[z[2,:]; z[4,:]], [z[3,:]; z[5,:]]];
julia&gt; bezout_number(F; variable_groups=variable_groups)
320
</code></pre>

<p>We can use this to solve the system more efficiently</p>

<pre><code class="language-julia">julia&gt; solve(F; variable_groups=variable_groups)
Result with 16 solutions
==================================
• 16 non-singular solutions (0 real)
• 0 singular solutions (0 real)
• 320 paths tracked
• random seed: 923247
</code></pre>

<h2 id="solving-the-inverse-problem-repeatedly">Solving the inverse problem repeatedly</h2>

<p>Now assume that we do not only want to know solve the inverse problem for one value of <code>p</code> but rather for many different positions of the hand.
Instead of solving the system from scratch every time (and tracking 324 paths) we can first compute as set of 16 solutions with respect to a &ldquo;generic&rdquo; (complex) set of parameters (offline phase) and then use these start solutions to compute the solutions for the specific parameters we are interested in (online phase). We can do this by using a <a href="/guides/parameter-homotopies/">parameter homotopy</a>.</p>

<p>Let&rsquo;s start with computing a generic instance.</p>

<pre><code class="language-julia">p_rand = randn(ComplexF64, 3)
F_rand = [subs(f, z[1,:]=&gt;z₁, z[6,:]=&gt;z₆, p=&gt;p_rand) for f in F′]
R_rand = solve(F_rand, variable_groups=variable_groups)
</code></pre>

<pre><code>Result with 16 solutions
==================================
• 16 non-singular solutions (0 real)
• 0 singular solutions (0 real)
• 320 paths tracked
• random seed: 235123
</code></pre>

<p>Now we can use this to solve for our specific value $q=[2,3,4]$:</p>

<pre><code class="language-julia">F̂ = [subs(f, z[1,:]=&gt;z₁, z[6,:]=&gt;z₆) for f in F′]
q = [2,3,4]
julia&gt; solve(F̂, solutions(R_rand); parameters=p, start_parameters=p_rand, target_parameters=q)
</code></pre>

<pre><code>Result with 16 solutions
==================================
• 16 non-singular solutions (0 real)
• 0 singular solutions (0 real)
• 16 paths tracked
• random seed: 231232
</code></pre>

<p>And we obtain 16 new solutions, but this time we only needed to track 16 paths.
For even more performance improvements you can take a look at our <a href="/guides/many-systems/">guide</a> regarding the solution of many systems in a loop.</p>


</div>

<div class="">
    <p>
  Published
  
    
      by <span itemprop="author">Sascha</span>
    
  
  <time datetime="2019-03-26T21:56:55&#43;01:00">
    26 Mar, 2019
  </time>
  
</p>

    
</div>


    
</div>
</div>
</main>
  <footer>   <footer id="footer">
    <nav>
      <ul>
        <li><span>HomotopyContinuation.jl</span></li>
        <li>
          <a href="/about/">About</a>
        </li>
        <li>
            <a href="/examples/">Examples</a>
          </li>
        <li>
          <a href="/guides/">Guides</a>
        </li>
      </ul>
    </nav>
    
  </footer> </footer>


  <script src="/js/kube.js" type="text/javascript">
  </script>
  <script src="/js/kube.legenda.js" type="text/javascript">
  </script>
  <script src="/js/master.js" type="text/javascript">
  </script>
  <script type="text/javascript">
     document.addEventListener("DOMContentLoaded", function() {
           renderMathInElement(document.body, {delimiters: [
          {left: "$$", right: "$$", display: true},
          {left: "$", right: "$", display: false},
          
          
          
          
        ]});
      });</script>
</body>

</html>
